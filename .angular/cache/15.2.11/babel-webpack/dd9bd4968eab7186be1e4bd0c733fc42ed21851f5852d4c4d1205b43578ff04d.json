{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { DialogBoxComponent } from '@app/dialog-box/dialog-box.component';\nimport { FoodStock } from '@app/_models/foodStock';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_services/foodstock.service\";\nimport * as i2 from \"@app/_services/food.service\";\nimport * as i3 from \"@angular/material/dialog\";\nfunction HomeComponent_mat_header_cell_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 24);\n    i0.ɵɵtext(1, \" Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\", 25)(1, \"span\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r16 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r16.food.name);\n  }\n}\nfunction HomeComponent_mat_header_cell_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 24);\n    i0.ɵɵtext(1, \" Quantity \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\", 27)(1, \"span\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r17 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r17.quantity);\n  }\n}\nfunction HomeComponent_mat_header_cell_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 28);\n    i0.ɵɵtext(1, \" Description \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\", 29)(1, \"span\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r18 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r18.food.description);\n  }\n}\nfunction HomeComponent_mat_header_cell_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 24);\n    i0.ɵɵtext(1, \" Location \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\", 30)(1, \"span\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r19 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r19.place.name);\n  }\n}\nfunction HomeComponent_mat_header_cell_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 24);\n    i0.ɵɵtext(1, \" Valid Date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\", 31)(1, \"span\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r20 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r20.validDate);\n  }\n}\nfunction HomeComponent_mat_header_cell_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\", 24);\n    i0.ɵɵtext(1, \" Alarm Date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\", 32)(1, \"span\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r21 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r21.alarmDate);\n  }\n}\nfunction HomeComponent_mat_header_cell_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \" Action \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_mat_cell_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-cell\", 33)(1, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function HomeComponent_mat_cell_27_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const row_r22 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.openDialog(\"Update\", row_r22));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" | \");\n    i0.ɵɵelementStart(4, \"a\", 34);\n    i0.ɵɵlistener(\"click\", function HomeComponent_mat_cell_27_Template_a_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const row_r22 = restoredCtx.$implicit;\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.openDialog(\"Delete\", row_r22));\n    });\n    i0.ɵɵtext(5, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomeComponent_mat_header_row_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\", 35);\n  }\n}\nfunction HomeComponent_mat_row_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\nconst _c0 = function () {\n  return [10, 25, 100];\n};\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(foodStockService, foodService, dialog) {\n      this.foodStockService = foodStockService;\n      this.foodService = foodService;\n      this.dialog = dialog;\n      this.options = {\n        timeOut: 3000,\n        showProgressBar: true,\n        pauseOnHover: true,\n        clickToClose: true\n      };\n      this.displayedColumns = ['food.name', 'quantity', 'food.description', 'place.name', 'validDate', 'alarmDate', 'action'];\n      this.foodStock = [];\n      foodStockService.foodStock.subscribe(updatedFood => {\n        this.foodStock = updatedFood;\n        this.dataSource = new MatTableDataSource(this.foodStock);\n        this.dataSource.paginator = this.paginator;\n        this.dataSource.sort = this.sort;\n      });\n    }\n    ngAfterViewInit() {}\n    openAddDialog() {\n      this.openDialog('Add', new FoodStock());\n    }\n    openDialog(action, foodStock) {\n      let obj = {\n        \"action\": action,\n        \"foodStock\": foodStock\n      };\n      const dialogRef = this.dialog.open(DialogBoxComponent, {\n        width: '250px',\n        data: obj\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result.event === 'Add') {\n          this.foodStockService.saveFoodStock(result.data).subscribe(data => {\n            const newArray = [...this.foodStock];\n            newArray.push(data);\n            this.foodStockService.nextFoodStock(newArray);\n          });\n        } else if (result.event === 'Update') {\n          console.log(\"UPDATE \" + JSON.stringify(result.data));\n          this.foodStockService.updateFoodStock(result.data).subscribe(data => {\n            const newArray = [...this.foodStock];\n            const objIndex = newArray.findIndex(obj => obj.id == result.data.id);\n            newArray[objIndex] = data;\n            this.foodStockService.nextFoodStock(newArray);\n          }, error => {\n            console.log(error);\n          });\n        } else if (result.event === 'Delete') {\n          this.foodStockService.deleteFoodStock(result.data.id).subscribe(data => {\n            const newArray = [...this.foodStock];\n            const objIndex = newArray.findIndex(obj => obj.id == result.data.id);\n            newArray.splice(objIndex, 1);\n            this.foodStockService.nextFoodStock(newArray);\n          }, error => {\n            console.log(error);\n          });\n        }\n      });\n    }\n    static #_ = this.ɵfac = function HomeComponent_Factory(t) {\n      return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.FoodStockService), i0.ɵɵdirectiveInject(i2.FoodService), i0.ɵɵdirectiveInject(i3.MatDialog));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HomeComponent,\n      selectors: [[\"ng-component\"]],\n      viewQuery: function HomeComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(MatPaginator, 5);\n          i0.ɵɵviewQuery(MatSort, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        }\n      },\n      decls: 31,\n      vars: 5,\n      consts: [[1, \"panel\"], [\"mat-button\", \"\", \"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"example-container\", \"mat-elevation-z8\"], [\"matSort\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"food.name\"], [\"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"data-label\", \"food.name\", 4, \"matCellDef\"], [\"matColumnDef\", \"quantity\"], [\"data-label\", \"quantity\", 4, \"matCellDef\"], [\"matColumnDef\", \"food.description\"], [\"mat-sort-header\", \"\", \"class\", \"extra-width\", 4, \"matHeaderCellDef\"], [\"data-label\", \"food.description\", 4, \"matCellDef\"], [\"matColumnDef\", \"place.name\"], [\"data-label\", \"place.name\", 4, \"matCellDef\"], [\"matColumnDef\", \"validDate\"], [\"data-label\", \"validDate\", 4, \"matCellDef\"], [\"matColumnDef\", \"alarmDate\"], [\"data-label\", \"alarmDate\", 4, \"matCellDef\"], [\"matColumnDef\", \"action\"], [4, \"matHeaderCellDef\"], [\"class\", \"action-link\", 4, \"matCellDef\"], [\"sticky\", \"\", 4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [3, \"pageSizeOptions\"], [\"mat-sort-header\", \"\"], [\"data-label\", \"food.name\"], [1, \"mobile-label\"], [\"data-label\", \"quantity\"], [\"mat-sort-header\", \"\", 1, \"extra-width\"], [\"data-label\", \"food.description\"], [\"data-label\", \"place.name\"], [\"data-label\", \"validDate\"], [\"data-label\", \"alarmDate\"], [1, \"action-link\"], [3, \"click\"], [\"sticky\", \"\"]],\n      template: function HomeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n          i0.ɵɵtext(2, \"Food Stocks\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"button\", 1);\n          i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_3_listener() {\n            return ctx.openAddDialog();\n          });\n          i0.ɵɵtext(4, \"Add Food\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 2)(6, \"mat-table\", 3);\n          i0.ɵɵelementContainerStart(7, 4);\n          i0.ɵɵtemplate(8, HomeComponent_mat_header_cell_8_Template, 2, 0, \"mat-header-cell\", 5);\n          i0.ɵɵtemplate(9, HomeComponent_mat_cell_9_Template, 3, 1, \"mat-cell\", 6);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(10, 7);\n          i0.ɵɵtemplate(11, HomeComponent_mat_header_cell_11_Template, 2, 0, \"mat-header-cell\", 5);\n          i0.ɵɵtemplate(12, HomeComponent_mat_cell_12_Template, 3, 1, \"mat-cell\", 8);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(13, 9);\n          i0.ɵɵtemplate(14, HomeComponent_mat_header_cell_14_Template, 2, 0, \"mat-header-cell\", 10);\n          i0.ɵɵtemplate(15, HomeComponent_mat_cell_15_Template, 3, 1, \"mat-cell\", 11);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(16, 12);\n          i0.ɵɵtemplate(17, HomeComponent_mat_header_cell_17_Template, 2, 0, \"mat-header-cell\", 5);\n          i0.ɵɵtemplate(18, HomeComponent_mat_cell_18_Template, 3, 1, \"mat-cell\", 13);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(19, 14);\n          i0.ɵɵtemplate(20, HomeComponent_mat_header_cell_20_Template, 2, 0, \"mat-header-cell\", 5);\n          i0.ɵɵtemplate(21, HomeComponent_mat_cell_21_Template, 3, 1, \"mat-cell\", 15);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(22, 16);\n          i0.ɵɵtemplate(23, HomeComponent_mat_header_cell_23_Template, 2, 0, \"mat-header-cell\", 5);\n          i0.ɵɵtemplate(24, HomeComponent_mat_cell_24_Template, 3, 1, \"mat-cell\", 17);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementContainerStart(25, 18);\n          i0.ɵɵtemplate(26, HomeComponent_mat_header_cell_26_Template, 2, 0, \"mat-header-cell\", 19);\n          i0.ɵɵtemplate(27, HomeComponent_mat_cell_27_Template, 6, 0, \"mat-cell\", 20);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵtemplate(28, HomeComponent_mat_header_row_28_Template, 1, 0, \"mat-header-row\", 21);\n          i0.ɵɵtemplate(29, HomeComponent_mat_row_29_Template, 1, 0, \"mat-row\", 22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(30, \"mat-paginator\", 23);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n          i0.ɵɵadvance(22);\n          i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(4, _c0));\n        }\n      },\n      styles: [\"body[_ngcontent-%COMP%]{font-family:Covered By Your Grace,cursive;line-height:1.25}.panel[_ngcontent-%COMP%]{display:block;height:auto;inset:0;margin:10px}mat-header-cell[_ngcontent-%COMP%]{color:#000;background-color:#a9a9a9}.mat-button[_ngcontent-%COMP%]{margin-bottom:10px}@media screen and (max-width: 960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:block;font-size:1em;text-align:right;font-weight:700;height:30px;margin-bottom:4%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}.mobile-label[_ngcontent-%COMP%]{margin-right:5%}.extra-width[_ngcontent-%COMP%]{flex-grow:1.2}.mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:4px}.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:4px}mat-cell[_ngcontent-%COMP%]:first-of-type:first-of-type{padding-left:0}mat-cell[_ngcontent-%COMP%]:last-of-type:last-of-type{padding-right:0}}\"]\n    });\n  }\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}